{% extends 'base.html' %}
{% load static %}

{% block styles %}
    <link href="{% static 'forum/css/forum_cards.css' %}" rel="stylesheet">
    <link href="{% static 'forum/css/forum_imagenslaterais.css' %}" rel="stylesheet">
    <link href="{% static 'forum/css/forum_novotopico.css' %}" rel="stylesheet">
    <link href="{% static 'forum/css/forum_styles.css' %}" rel="stylesheet">
{% endblock styles %}

{% block content %}
    <div id="container">
        <!-- Título principal e botão de ver mais -->
        <div>
            <div style="display: flex; flex-direction: row; justify-content: space-between; align-items:start;">
                <div  style="display: flex; flex-direction: column;">
                    <!-- Título da página -->
                    <h1 class="txt" id="txt_titulo">Encontre o <span id="span_grupocerto">grupo certo</span> para compartilhar seus <span id="span_interesses">interesses</span></h1>
                    <p class="txt" id="txt_subtitulo">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus at mauris quis magna aliquet condimentum. Cras et turpis id eros tincidunt faucibus.</p>
                    <!-- Botão Saber Mais com ícone -->
                     <button id="btn_saibamais">Saber Mais<img src="{% static 'forum/img/btn_forum/seta_sabermais.svg' %}" id="icon_btn_saibamais"></button>
                </div>

                <!-- Imagens laterais decorativas -->
                <div id="imagenslaterais"; style="position: absolute; margin-top: 0;">
                    <div id="imagem1">
                        <img src="{% static 'forum/img/imagenslateral/imagem1.png' %}">
                    </div>
                    <div id="imagem2">
                        <img src="{% static 'forum/img/imagenslateral/imagem2.png' %}">
                    </div>
                    <div id="imagem3">
                        <img src="{% static 'forum/img/imagenslateral/imagem3.png' %}">
                    </div>
                    <div id="retangulo"></div>
                </div>
            </div>
        </div>

        <!-- Novos tópicos -->
        <section id="novotopico">
            <!-- Caixa para adicionar novo tópico -->
            <div id="card_add">
                <form action="{% url 'forum:salvar_comentario' %}" method="post" id="form-comentario">
                    {% csrf_token %}
                    <input type="text" name="titulo" id="titulo" placeholder="Título" class="forum-comentario-titulo">
                    <textarea id="caixadetexto" name="caixadetexto" placeholder="Adicionar um novo tópico"></textarea>
                </form>
                <div style="text-align: right; padding-right: 40px;">
                    <button id="btn_plus" form="form-comentario">
                        <img src="{% static 'forum/img/btn_forum/plus.svg' %}">
                    </button>
                </div>
            </div>

            {% for comentario in comentarios %}
                <div class="card_topico" id="primeiro_comentario">
                    <h3>{{ comentario.titulo }}</h3>
                    <div id="usuario">
                        <div id="usuario">
                            <div id="cavaloanonimo">
                                <div id="quadradoroxo">
                                    <img src="{% static 'forum/img/cavaloanonimoimg.svg' %}">
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column;">
                            <h4 id="nome_usuario">{{ comentario.autor }}</h4> <!--Nome do usuário-->
                            <p id="horario">{{ comentario.data_criacao|timesince }} atrás</p> <!-- Tempo desde o post -->
                        </div>
                    </div>

                    <!-- Texto do comentário resumido -->
                    <p id="txt_comentario">{{ comentario.conteudo|truncatewords:100 }}</p>

                    <!-- Botão para expandir o comentário -->
                    <button id="btn_vermais">
                        <p style="color: #D9D9D9;">Ver mais</p> <!--Texto do botão-->
                        <img src="{% static 'forum/img/btn_forum/seta_vermais.svg' %}"> <!--Icone do botão-->
                    </button>

                    <!--Parte inferior do card (Botões e texto)-->
                    <div id="parte_inferior" style="justify-content: space-between;">
                        <div id="acoes" style="justify-content: space-around;">
                            <!--Salvar conteudo-->
                            <button id="btn_salvar">
                                <img src="{% static 'forum/img/btn_forum/salvar.svg' %}" id="icon_salvar">
                            </button>
                            <!--Adicionar comentario-->
                            <button id="btn_addcomentario">
                                <img src="{% static 'forum/img/btn_forum/comentario.svg' %}" id="icon_comentario">
                                <p>Adicionar comentário</p>
                            </button>
                        </div>
                        <div>
                            <p id="facacomo">Faça como Capivara Anônima, Falcão Anônimo e outras 20 pessoas e comente sobre <span style="font-family: DM Sans;font-weight: 700;">  Lorem ipsum dolor sit amet</span></p>
                        </div>
                    </div>
                </div>
            {% endfor %}

        <div id="topicospopulares">
            <h2>Tópicos <span id="span_populares">populares</span></h2>
            <div class="container_flex">
                {% for comentario in comentarios|slice:":3" %}
                    <div class="card_flex">
                        <h3>{{ comentario.titulo }}</h3>
                        <p class="txt_topicos">{{ comentario.conteudo|truncatewords:10 }}</p>
                        <div class="txt_icon" >
                            <img src="{% static 'forum/img/btn_forum/comentario.svg' %}">
                            <p class="qnt_pessoas">25 pessoas estão discutindo esse tópico</p>
                        </div>
                        <div class="txt_icon">
                            <img src="{% static 'forum/img/btn_forum/relogio.svg' %}" class="icon_tempo">
                            <p class="tempo">{{ comentario.data_criacao|timesince }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock content %}